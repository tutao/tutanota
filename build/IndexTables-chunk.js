import { LazyLoaded, delay, downcast, stringToUtf8Uint8Array, uint8ArrayToBase64 } from "./dist2-chunk.js";
import { DbError } from "./DbError-chunk.js";
import { IndexingNotSupportedError, QuotaExceededError } from "./QuotaExceededError-chunk.js";
import { sha256Hash } from "./dist3-chunk.js";

//#region src/common/api/worker/search/DbFacade.ts
function extractErrorProperties(e) {
	const requestErrorEntries = {};
	for (let key in e) requestErrorEntries[key] = e[key];
	return JSON.stringify(requestErrorEntries);
}
var DbFacade = class DbFacade {
	_id;
	_db;
	_activeTransactions;
	indexingSupported = true;
	constructor(version, onupgrade) {
		this._activeTransactions = 0;
		this._db = new LazyLoaded(() => {
			if (!this.indexingSupported) return Promise.reject(new IndexingNotSupportedError("indexedDB not supported"));
else return new Promise((resolve, reject) => {
				let DBOpenRequest;
				try {
					DBOpenRequest = self.indexedDB.open(this._id, version);
					DBOpenRequest.onerror = (event) => {
						const target = event.target;
						const error = event.target?.error;
						const requestErrorEntries = extractErrorProperties(DBOpenRequest.error);
						const eventProperties = extractErrorProperties(event);
						this.indexingSupported = false;
						const message = "DbFacade.open.onerror: " + this._id + "\nrequest.error: " + requestErrorEntries + "\nevent: " + eventProperties + "\nevent.target.error: " + (error ?? "[none]");
						if (error?.name === "QuotaExceededError") {
							console.log("Storage Quota is exceeded");
							reject(new QuotaExceededError(message, DBOpenRequest.error || error));
						} else reject(new IndexingNotSupportedError(message, DBOpenRequest.error || error));
					};
					DBOpenRequest.onupgradeneeded = (event) => {
						try {
							onupgrade(event, event.target.result, this);
						} catch (e) {
							reject(new DbError("could not create object store for DB " + this._id, e));
						}
					};
					DBOpenRequest.onsuccess = (event) => {
						DBOpenRequest.result.onabort = (event$1) => console.log("db aborted", event$1);
						DBOpenRequest.result.onclose = (event$1) => {
							console.log("db closed", event$1);
							this._db.reset();
						};
						DBOpenRequest.result.onerror = (event$1) => console.log("db error", event$1);
						resolve(DBOpenRequest.result);
					};
				} catch (e) {
					this.indexingSupported = false;
					reject(new IndexingNotSupportedError(`exception when accessing indexeddb ${this._id}`, e));
				}
			});
		});
	}
	async open(id) {
		this._id = id;
		await this._db.getAsync();
	}
	isSameDbId(dbId) {
		return this._id === dbId;
	}
	/**
	* Closes the db if it's open and deletes it.
	*/
	deleteDatabase(id) {
		const ensureDbIsClosed = () => {
			if (this._db.isLoaded()) if (this._activeTransactions > 0) return delay(150).then(ensureDbIsClosed);
else {
				this._db.getLoaded().close();
				return Promise.resolve();
			}
else return Promise.resolve();
		};
		return ensureDbIsClosed().then(() => DbFacade.deleteDb(id)).then(() => this._db.reset());
	}
	static deleteDb(id) {
		return new Promise((resolve, reject) => {
			const deleteRequest = self.indexedDB.deleteDatabase(id);
			deleteRequest.onerror = (event) => reject(new DbError(`could not delete database ${id}`, downcast(event)));
			deleteRequest.onsuccess = () => resolve();
		});
	}
	/**
	* @pre open() must have been called before, but the promise does not need to have returned.
	*/
	createTransaction(readOnly, objectStores) {
		return this._db.getAsync().then((db) => {
			try {
				const idbTransaction = db.transaction(objectStores, readOnly ? "readonly" : "readwrite");
				const transaction = new IndexedDbTransaction(idbTransaction, () => {
					this.indexingSupported = false;
					this._db.reset();
				});
				this._activeTransactions++;
				transaction.wait().finally(() => {
					this._activeTransactions--;
				});
				return transaction;
			} catch (e) {
				throw new DbError("could not create transaction", e);
			}
		});
	}
};
var IndexedDbTransaction = class {
	_transaction;
	_promise;
	_onUnknownError;
	aborted = false;
	constructor(transaction, onUnknownError) {
		this._transaction = transaction;
		this._onUnknownError = onUnknownError;
		this._promise = new Promise((resolve, reject) => {
			let done = false;
			transaction.onerror = (event) => {
				if (!done) this._handleDbError(event, this._transaction, "transaction.onerror", (e) => {
					reject(e);
				});
else console.log("ignore error of aborted/fulfilled transaction", event);
			};
			transaction.oncomplete = () => {
				done = true;
				resolve();
			};
			transaction.onabort = (event) => {
				event.stopPropagation();
				done = true;
				resolve();
			};
		});
	}
	getAll(objectStore) {
		return new Promise((resolve, reject) => {
			try {
				let keys = [];
				let request = this._transaction.objectStore(objectStore).openCursor();
				request.onerror = (event) => {
					this._handleDbError(event, request, "getAll().onError " + objectStore, reject);
				};
				request.onsuccess = (event) => {
					let cursor = request.result;
					if (cursor) {
						keys.push({
							key: cursor.key,
							value: cursor.value
						});
						cursor.continue();
					} else resolve(keys);
				};
			} catch (e) {
				this._handleDbError(e, null, "getAll().catch", reject);
			}
		});
	}
	get(objectStore, key, indexName) {
		return new Promise((resolve, reject) => {
			try {
				const os = this._transaction.objectStore(objectStore);
				let request;
				if (indexName) request = os.index(indexName).get(key);
else request = os.get(key);
				request.onerror = (event) => {
					this._handleDbError(event, request, "get().onerror " + objectStore, reject);
				};
				request.onsuccess = (event) => {
					resolve(event.target.result);
				};
			} catch (e) {
				this._handleDbError(e, null, "get().catch", reject);
			}
		});
	}
	async getAsList(objectStore, key, indexName) {
		const result = await this.get(objectStore, key, indexName);
		return result ? [result] : [];
	}
	put(objectStore, key, value) {
		return new Promise((resolve, reject) => {
			try {
				let request = key ? this._transaction.objectStore(objectStore).put(value, key) : this._transaction.objectStore(objectStore).put(value);
				request.onerror = (event) => {
					this._handleDbError(event, request, "put().onerror " + objectStore, reject);
				};
				request.onsuccess = (event) => {
					resolve(event.target.result);
				};
			} catch (e) {
				this._handleDbError(e, null, "put().catch", reject);
			}
		});
	}
	delete(objectStore, key) {
		return new Promise((resolve, reject) => {
			try {
				let request = this._transaction.objectStore(objectStore).delete(key);
				request.onerror = (event) => {
					this._handleDbError(event, request, "delete().onerror " + objectStore, reject);
				};
				request.onsuccess = (event) => {
					resolve();
				};
			} catch (e) {
				this._handleDbError(e, null, ".delete().catch " + objectStore, reject);
			}
		});
	}
	abort() {
		this.aborted = true;
		this._transaction.abort();
	}
	wait() {
		return this._promise;
	}
	_handleDbError(event, customTarget, prefix, callback) {
		const errorEntries = extractErrorProperties(event);
		const eventTargetEntries = event.target ? extractErrorProperties(event.target) : "<null>";
		const eventTargetErrorEntries = event.target && event.target.error ? extractErrorProperties(event.target.error) : "<null>";
		const customTargetEntries = customTarget ? extractErrorProperties(customTarget) : "<null>";
		const customTargetErrorEntries = customTarget && customTarget.error ? extractErrorProperties(customTarget.error) : "<null>";
		const msg = "IndexedDbTransaction " + prefix + "\nOSes: " + JSON.stringify(this._transaction.objectStoreNames) + "\nevent:" + errorEntries + "\ntransaction.error: " + (this._transaction.error ? this._transaction.error.message : "<null>") + "\nevent.target: " + eventTargetEntries + "\nevent.target.error: " + eventTargetErrorEntries + "\ncustom.target: " + customTargetEntries + "\ncustom.target.error: " + customTargetErrorEntries;
		if (typeof event.stopPropagation === "function") event.stopPropagation();
		if (customTarget && customTarget.error && (customTarget.error.name === "UnknownError" || typeof customTarget.error.message === "string" && customTarget.error.message.includes("UnknownError"))) {
			this._onUnknownError(customTarget.error);
			callback(new IndexingNotSupportedError(msg, this._transaction.error ?? undefined));
		} else {
			const e = this._transaction.error || (customTarget ? customTarget.error : null);
			if (e && e.name && e.name === "QuotaExceededError") {
				console.warn("Storage Quota exceeded");
				callback(new QuotaExceededError(msg, e));
			} else callback(new DbError(msg, e));
		}
	}
};
function b64UserIdHash(userId) {
	return uint8ArrayToBase64(sha256Hash(stringToUtf8Uint8Array(userId)));
}

//#endregion
//#region src/common/api/worker/search/IndexTables.ts
const SearchIndexOS = "SearchIndex";
const SearchIndexMetaDataOS = "SearchIndexMeta";
const ElementDataOS = "ElementData";
const MetaDataOS = "MetaData";
const GroupDataOS = "GroupMetaData";
const SearchTermSuggestionsOS = "SearchTermSuggestions";
const SearchIndexWordsIndex = "SearchIndexWords";
const Metadata = {
	userEncDbKey: "userEncDbKey",
	encDbIv: "encDbIv",
	userGroupKeyVersion: "userGroupKeyVersion",
	mailIndexingEnabled: "mailIndexingEnabled",
	excludedListIds: "excludedListIds",
	lastEventIndexTimeMs: "lastEventIndexTimeMs"
};

//#endregion
export { DbFacade, ElementDataOS, GroupDataOS, MetaDataOS, Metadata, SearchIndexMetaDataOS, SearchIndexOS, SearchIndexWordsIndex, SearchTermSuggestionsOS, b64UserIdHash };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5kZXhUYWJsZXMtY2h1bmsuanMiLCJuYW1lcyI6WyJlOiBhbnkiLCJyZXF1ZXN0RXJyb3JFbnRyaWVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IiwidmVyc2lvbjogbnVtYmVyIiwib251cGdyYWRlOiAoZXZlbnQ6IGFueSwgZGI6IElEQkRhdGFiYXNlLCBkYkZhY2FkZTogRGJGYWNhZGUpID0+IHZvaWQiLCJEQk9wZW5SZXF1ZXN0OiBJREJPcGVuREJSZXF1ZXN0IiwiZXZlbnQ6IElEQlZlcnNpb25DaGFuZ2VFdmVudCIsImV2ZW50IiwiaWQ6IHN0cmluZyIsImRiSWQ6IHN0cmluZyIsImV2ZW50OiBFcnJvckV2ZW50IiwicmVhZE9ubHk6IGJvb2xlYW4iLCJvYmplY3RTdG9yZXM6IE9iamVjdFN0b3JlTmFtZVtdIiwidHJhbnNhY3Rpb246IElEQlRyYW5zYWN0aW9uIiwib25Vbmtub3duRXJyb3I6IChlOiBhbnkpID0+IHVua25vd24iLCJvYmplY3RTdG9yZTogT2JqZWN0U3RvcmVOYW1lIiwia2V5czogRGF0YWJhc2VFbnRyeVtdIiwia2V5OiBEYktleSIsImluZGV4TmFtZT86IEluZGV4TmFtZSIsInJlcXVlc3Q6IElEQlJlcXVlc3Q8YW55PiIsImtleTogRGJLZXkgfCBudWxsIiwidmFsdWU6IGFueSIsImV2ZW50OiBhbnkiLCJjdXN0b21UYXJnZXQ6IGFueSB8IG51bGwiLCJwcmVmaXg6IHN0cmluZyIsImNhbGxiYWNrOiAoZTogYW55KSA9PiB1bmtub3duIiwidXNlcklkOiBJZCIsIlNlYXJjaEluZGV4T1M6IE9iamVjdFN0b3JlTmFtZSIsIlNlYXJjaEluZGV4TWV0YURhdGFPUzogT2JqZWN0U3RvcmVOYW1lIiwiRWxlbWVudERhdGFPUzogT2JqZWN0U3RvcmVOYW1lIiwiTWV0YURhdGFPUzogT2JqZWN0U3RvcmVOYW1lIiwiR3JvdXBEYXRhT1M6IE9iamVjdFN0b3JlTmFtZSIsIlNlYXJjaFRlcm1TdWdnZXN0aW9uc09TOiBPYmplY3RTdG9yZU5hbWUiLCJTZWFyY2hJbmRleFdvcmRzSW5kZXg6IEluZGV4TmFtZSJdLCJzb3VyY2VzIjpbIi4uL3NyYy9jb21tb24vYXBpL3dvcmtlci9zZWFyY2gvRGJGYWNhZGUudHMiLCIuLi9zcmMvY29tbW9uL2FwaS93b3JrZXIvc2VhcmNoL0luZGV4VGFibGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERiRXJyb3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2Vycm9yL0RiRXJyb3JcIlxuaW1wb3J0IHsgZGVsYXksIGRvd25jYXN0LCBMYXp5TG9hZGVkLCBzdHJpbmdUb1V0ZjhVaW50OEFycmF5LCB1aW50OEFycmF5VG9CYXNlNjQgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEluZGV4aW5nTm90U3VwcG9ydGVkRXJyb3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2Vycm9yL0luZGV4aW5nTm90U3VwcG9ydGVkRXJyb3JcIlxuaW1wb3J0IHsgUXVvdGFFeGNlZWRlZEVycm9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9lcnJvci9RdW90YUV4Y2VlZGVkRXJyb3JcIlxuaW1wb3J0IHsgc2hhMjU2SGFzaCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtY3J5cHRvXCJcbmltcG9ydCB7IEluZGV4TmFtZSwgT2JqZWN0U3RvcmVOYW1lIH0gZnJvbSBcIi4vSW5kZXhUYWJsZXMuanNcIlxuXG5leHBvcnQgY29uc3Qgb3NOYW1lID0gKG9iamVjdFN0b3JlTmFtZTogT2JqZWN0U3RvcmVOYW1lKTogc3RyaW5nID0+IG9iamVjdFN0b3JlTmFtZVxuZXhwb3J0IHR5cGUgRGJLZXkgPSBzdHJpbmcgfCBudW1iZXIgfCBVaW50OEFycmF5XG5leHBvcnQgdHlwZSBEYXRhYmFzZUVudHJ5ID0ge1xuXHRrZXk6IERiS2V5XG5cdHZhbHVlOiBhbnlcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEYlRyYW5zYWN0aW9uIHtcblx0Z2V0QWxsKG9iamVjdFN0b3JlOiBPYmplY3RTdG9yZU5hbWUpOiBQcm9taXNlPEFycmF5PERhdGFiYXNlRW50cnk+PlxuXG5cdGdldDxUID0gYW55PihvYmplY3RTdG9yZTogT2JqZWN0U3RvcmVOYW1lLCBrZXk6IERiS2V5LCBpbmRleE5hbWU/OiBJbmRleE5hbWUpOiBQcm9taXNlPFQgfCBudWxsPlxuXG5cdGdldEFzTGlzdDxUID0gYW55PihvYmplY3RTdG9yZTogT2JqZWN0U3RvcmVOYW1lLCBrZXk6IERiS2V5LCBpbmRleE5hbWU/OiBJbmRleE5hbWUpOiBQcm9taXNlPFRbXT5cblxuXHRwdXQob2JqZWN0U3RvcmU6IE9iamVjdFN0b3JlTmFtZSwga2V5OiBEYktleSB8IG51bGwsIHZhbHVlOiBhbnkpOiBQcm9taXNlPGFueT5cblxuXHRkZWxldGUob2JqZWN0U3RvcmU6IE9iamVjdFN0b3JlTmFtZSwga2V5OiBEYktleSk6IFByb21pc2U8dm9pZD5cblxuXHRhYm9ydCgpOiB2b2lkXG5cblx0d2FpdCgpOiBQcm9taXNlPHZvaWQ+XG5cblx0YWJvcnRlZDogYm9vbGVhblxufVxuXG5mdW5jdGlvbiBleHRyYWN0RXJyb3JQcm9wZXJ0aWVzKGU6IGFueSk6IHN0cmluZyB7XG5cdGNvbnN0IHJlcXVlc3RFcnJvckVudHJpZXM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuXG5cdGZvciAobGV0IGtleSBpbiBlKSB7XG5cdFx0cmVxdWVzdEVycm9yRW50cmllc1trZXldID0gZVtrZXldXG5cdH1cblxuXHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkocmVxdWVzdEVycm9yRW50cmllcylcbn1cblxuLyoqIGZhY2FkZSB0byBtYW5hZ2UgYSBzaW5nbGUgbmFtZWQgaW5kZXhlZERiICovXG5leHBvcnQgY2xhc3MgRGJGYWNhZGUge1xuXHRwcml2YXRlIF9pZCE6IHN0cmluZ1xuXHRwcml2YXRlIF9kYjogTGF6eUxvYWRlZDxJREJEYXRhYmFzZT5cblx0cHJpdmF0ZSBfYWN0aXZlVHJhbnNhY3Rpb25zOiBudW1iZXJcblx0aW5kZXhpbmdTdXBwb3J0ZWQ6IGJvb2xlYW4gPSB0cnVlXG5cblx0Y29uc3RydWN0b3IodmVyc2lvbjogbnVtYmVyLCBvbnVwZ3JhZGU6IChldmVudDogYW55LCBkYjogSURCRGF0YWJhc2UsIGRiRmFjYWRlOiBEYkZhY2FkZSkgPT4gdm9pZCkge1xuXHRcdHRoaXMuX2FjdGl2ZVRyYW5zYWN0aW9ucyA9IDBcblx0XHR0aGlzLl9kYiA9IG5ldyBMYXp5TG9hZGVkKCgpID0+IHtcblx0XHRcdGlmICghdGhpcy5pbmRleGluZ1N1cHBvcnRlZCkge1xuXHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEluZGV4aW5nTm90U3VwcG9ydGVkRXJyb3IoXCJpbmRleGVkREIgbm90IHN1cHBvcnRlZFwiKSlcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdFx0bGV0IERCT3BlblJlcXVlc3Q6IElEQk9wZW5EQlJlcXVlc3RcblxuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHREQk9wZW5SZXF1ZXN0ID0gc2VsZi5pbmRleGVkREIub3Blbih0aGlzLl9pZCwgdmVyc2lvbilcblxuXHRcdFx0XHRcdFx0REJPcGVuUmVxdWVzdC5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldFxuXHRcdFx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGVycm9yID0gZXZlbnQudGFyZ2V0Py5lcnJvclxuXG5cdFx0XHRcdFx0XHRcdC8vIENvcHkgYWxsIHRoZSBrZXlzIGZyb20gdGhlIGVycm9yLCBpbmNsdWRpbmcgaW5oZXJpdGVudCBvbmVzIHNvIHdlIGNhbiBnZXQgc29tZSBpbmZvXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHJlcXVlc3RFcnJvckVudHJpZXMgPSBleHRyYWN0RXJyb3JQcm9wZXJ0aWVzKERCT3BlblJlcXVlc3QuZXJyb3IpXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGV2ZW50UHJvcGVydGllcyA9IGV4dHJhY3RFcnJvclByb3BlcnRpZXMoZXZlbnQpXG5cdFx0XHRcdFx0XHRcdHRoaXMuaW5kZXhpbmdTdXBwb3J0ZWQgPSBmYWxzZVxuXHRcdFx0XHRcdFx0XHRjb25zdCBtZXNzYWdlID1cblx0XHRcdFx0XHRcdFx0XHRcIkRiRmFjYWRlLm9wZW4ub25lcnJvcjogXCIgK1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuX2lkICtcblx0XHRcdFx0XHRcdFx0XHRcIlxcbnJlcXVlc3QuZXJyb3I6IFwiICtcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0RXJyb3JFbnRyaWVzICtcblx0XHRcdFx0XHRcdFx0XHRcIlxcbmV2ZW50OiBcIiArXG5cdFx0XHRcdFx0XHRcdFx0ZXZlbnRQcm9wZXJ0aWVzICtcblx0XHRcdFx0XHRcdFx0XHRcIlxcbmV2ZW50LnRhcmdldC5lcnJvcjogXCIgK1xuXHRcdFx0XHRcdFx0XHRcdChlcnJvciA/PyBcIltub25lXVwiKVxuXG5cdFx0XHRcdFx0XHRcdGlmIChlcnJvcj8ubmFtZSA9PT0gXCJRdW90YUV4Y2VlZGVkRXJyb3JcIikge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiU3RvcmFnZSBRdW90YSBpcyBleGNlZWRlZFwiKVxuXHRcdFx0XHRcdFx0XHRcdHJlamVjdChuZXcgUXVvdGFFeGNlZWRlZEVycm9yKG1lc3NhZ2UsIERCT3BlblJlcXVlc3QuZXJyb3IgfHwgZXJyb3IpKVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHJlamVjdChuZXcgSW5kZXhpbmdOb3RTdXBwb3J0ZWRFcnJvcihtZXNzYWdlLCBEQk9wZW5SZXF1ZXN0LmVycm9yIHx8IGVycm9yKSlcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHREQk9wZW5SZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IChldmVudDogSURCVmVyc2lvbkNoYW5nZUV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRcdC8vY29uc29sZS5sb2coXCJ1cGdyYWRlIGRiXCIsIGV2ZW50KVxuXHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0XHRcdFx0XHRvbnVwZ3JhZGUoZXZlbnQsIGV2ZW50LnRhcmdldC5yZXN1bHQsIHRoaXMpXG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdFx0XHRyZWplY3QobmV3IERiRXJyb3IoXCJjb3VsZCBub3QgY3JlYXRlIG9iamVjdCBzdG9yZSBmb3IgREIgXCIgKyB0aGlzLl9pZCwgZSkpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0REJPcGVuUmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcIm9wZW5lZCBkYlwiLCBldmVudClcblx0XHRcdFx0XHRcdFx0REJPcGVuUmVxdWVzdC5yZXN1bHQub25hYm9ydCA9IChldmVudCkgPT4gY29uc29sZS5sb2coXCJkYiBhYm9ydGVkXCIsIGV2ZW50KVxuXG5cdFx0XHRcdFx0XHRcdERCT3BlblJlcXVlc3QucmVzdWx0Lm9uY2xvc2UgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImRiIGNsb3NlZFwiLCBldmVudClcblxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuX2RiLnJlc2V0KClcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdERCT3BlblJlcXVlc3QucmVzdWx0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IGNvbnNvbGUubG9nKFwiZGIgZXJyb3JcIiwgZXZlbnQpXG5cblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShEQk9wZW5SZXF1ZXN0LnJlc3VsdClcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmluZGV4aW5nU3VwcG9ydGVkID0gZmFsc2Vcblx0XHRcdFx0XHRcdHJlamVjdChuZXcgSW5kZXhpbmdOb3RTdXBwb3J0ZWRFcnJvcihgZXhjZXB0aW9uIHdoZW4gYWNjZXNzaW5nIGluZGV4ZWRkYiAke3RoaXMuX2lkfWAsIGUpKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cblx0YXN5bmMgb3BlbihpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dGhpcy5faWQgPSBpZFxuXHRcdGF3YWl0IHRoaXMuX2RiLmdldEFzeW5jKClcblx0fVxuXG5cdGlzU2FtZURiSWQoZGJJZDogc3RyaW5nKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2lkID09PSBkYklkXG5cdH1cblxuXHQvKipcblx0ICogQ2xvc2VzIHRoZSBkYiBpZiBpdCdzIG9wZW4gYW5kIGRlbGV0ZXMgaXQuXG5cdCAqL1xuXHRkZWxldGVEYXRhYmFzZShpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgZW5zdXJlRGJJc0Nsb3NlZCA9ICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcblx0XHRcdGlmICh0aGlzLl9kYi5pc0xvYWRlZCgpKSB7XG5cdFx0XHRcdGlmICh0aGlzLl9hY3RpdmVUcmFuc2FjdGlvbnMgPiAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRlbGF5KDE1MCkudGhlbihlbnN1cmVEYklzQ2xvc2VkKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuX2RiLmdldExvYWRlZCgpLmNsb3NlKClcblx0XHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVuc3VyZURiSXNDbG9zZWQoKVxuXHRcdFx0LnRoZW4oKCkgPT4gRGJGYWNhZGUuZGVsZXRlRGIoaWQpKVxuXHRcdFx0LnRoZW4oKCkgPT4gdGhpcy5fZGIucmVzZXQoKSlcblx0fVxuXG5cdHN0YXRpYyBkZWxldGVEYihpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGNvbnN0IGRlbGV0ZVJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShpZClcblx0XHRcdGRlbGV0ZVJlcXVlc3Qub25lcnJvciA9IChldmVudDogRXJyb3JFdmVudCkgPT4gcmVqZWN0KG5ldyBEYkVycm9yKGBjb3VsZCBub3QgZGVsZXRlIGRhdGFiYXNlICR7aWR9YCwgZG93bmNhc3Q8RXJyb3I+KGV2ZW50KSkpXG5cdFx0XHRkZWxldGVSZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUoKVxuXHRcdH0pXG5cdH1cblxuXHQvKipcblx0ICogQHByZSBvcGVuKCkgbXVzdCBoYXZlIGJlZW4gY2FsbGVkIGJlZm9yZSwgYnV0IHRoZSBwcm9taXNlIGRvZXMgbm90IG5lZWQgdG8gaGF2ZSByZXR1cm5lZC5cblx0ICovXG5cdGNyZWF0ZVRyYW5zYWN0aW9uKHJlYWRPbmx5OiBib29sZWFuLCBvYmplY3RTdG9yZXM6IE9iamVjdFN0b3JlTmFtZVtdKTogUHJvbWlzZTxEYlRyYW5zYWN0aW9uPiB7XG5cdFx0Ly8gV0FSTklOR1xuXHRcdC8vIERvIG5vdCBtYWtlIHRoaXMgbWV0aG9kIGFzeW5jIGJlY2F1c2UgU2FmYXJpIGxpa2VzIHRvIGNsb3NlIHRoZSB0cmFuc2FjdGlvbiBpZiBpdCdzIG5vdCB1c2VkIHJpZ2h0IGF3YXkgYW5kIGFzeW5jIHNvbWVob3cgaW5mbHVlbmNlcyB0aGF0LlxuXHRcdC8vIFdvdWxkIGJlIGdyZWF0IGlmIHdlIGNvdWxkbid0IGV2ZW4gY2FsbCBgY3JlYXRlVHJhbnNhY3Rpb25gIHdpdGhvdXQgaGF2aW5nIGEgZGF0YWJhc2UgYmVmb3JlaGFuZCwgdGhlbiB0aGlzIG1ldGhvZCBjb3VsZCBiZSBzeW5jLlxuXHRcdHJldHVybiB0aGlzLl9kYi5nZXRBc3luYygpLnRoZW4oKGRiKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCBpZGJUcmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKG9iamVjdFN0b3JlcyBhcyBzdHJpbmdbXSwgcmVhZE9ubHkgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiKVxuXHRcdFx0XHRjb25zdCB0cmFuc2FjdGlvbiA9IG5ldyBJbmRleGVkRGJUcmFuc2FjdGlvbihpZGJUcmFuc2FjdGlvbiwgKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuaW5kZXhpbmdTdXBwb3J0ZWQgPSBmYWxzZVxuXG5cdFx0XHRcdFx0dGhpcy5fZGIucmVzZXQoKVxuXHRcdFx0XHR9KVxuXHRcdFx0XHR0aGlzLl9hY3RpdmVUcmFuc2FjdGlvbnMrK1xuXHRcdFx0XHR0cmFuc2FjdGlvbi53YWl0KCkuZmluYWxseSgoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5fYWN0aXZlVHJhbnNhY3Rpb25zLS1cblx0XHRcdFx0fSlcblx0XHRcdFx0cmV0dXJuIHRyYW5zYWN0aW9uXG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdHRocm93IG5ldyBEYkVycm9yKFwiY291bGQgbm90IGNyZWF0ZSB0cmFuc2FjdGlvblwiLCBlKVxuXHRcdFx0fVxuXHRcdH0pXG5cdH1cbn1cblxuLyoqXG4gKiBBIHRyYW5zYWN0aW9uIGlzIHVzdWFsbHkgY29tbWl0dGVkIGFmdGVyIGFsbCByZXF1ZXN0cyBwbGFjZWQgYWdhaW5zdCB0aGUgdHJhbnNhY3Rpb24gaGF2ZSBiZWVuIGV4ZWN1dGVkIGFuZCB0aGVpclxuICogcmV0dXJuZWQgcmVzdWx0cyBoYW5kbGVkLCBhbmQgbm8gbmV3IHJlcXVlc3RzIGhhdmUgYmVlbiBwbGFjZWQgYWdhaW5zdCB0aGUgdHJhbnNhY3Rpb24uXG4gKiBAc2VlIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9JbmRleGVkREIvI3JlZi1mb3ItdHJhbnNhY3Rpb24tZmluaXNoXG4gKi9cbmV4cG9ydCBjbGFzcyBJbmRleGVkRGJUcmFuc2FjdGlvbiBpbXBsZW1lbnRzIERiVHJhbnNhY3Rpb24ge1xuXHRwcml2YXRlIHJlYWRvbmx5IF90cmFuc2FjdGlvbjogSURCVHJhbnNhY3Rpb25cblx0cHJpdmF0ZSByZWFkb25seSBfcHJvbWlzZTogUHJvbWlzZTx2b2lkPlxuXHRwcml2YXRlIHJlYWRvbmx5IF9vblVua25vd25FcnJvcjogKGU6IGFueSkgPT4gdW5rbm93blxuXHRhYm9ydGVkOiBib29sZWFuID0gZmFsc2VcblxuXHRjb25zdHJ1Y3Rvcih0cmFuc2FjdGlvbjogSURCVHJhbnNhY3Rpb24sIG9uVW5rbm93bkVycm9yOiAoZTogYW55KSA9PiB1bmtub3duKSB7XG5cdFx0dGhpcy5fdHJhbnNhY3Rpb24gPSB0cmFuc2FjdGlvblxuXHRcdHRoaXMuX29uVW5rbm93bkVycm9yID0gb25Vbmtub3duRXJyb3Jcblx0XHR0aGlzLl9wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0bGV0IGRvbmUgPSBmYWxzZVxuXG5cdFx0XHR0cmFuc2FjdGlvbi5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG5cdFx0XHRcdGlmICghZG9uZSkge1xuXHRcdFx0XHRcdHRoaXMuX2hhbmRsZURiRXJyb3IoZXZlbnQsIHRoaXMuX3RyYW5zYWN0aW9uLCBcInRyYW5zYWN0aW9uLm9uZXJyb3JcIiwgKGUpID0+IHtcblx0XHRcdFx0XHRcdHJlamVjdChlKVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJpZ25vcmUgZXJyb3Igb2YgYWJvcnRlZC9mdWxmaWxsZWQgdHJhbnNhY3Rpb25cIiwgZXZlbnQpXG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9ICgpID0+IHtcblx0XHRcdFx0ZG9uZSA9IHRydWVcblx0XHRcdFx0cmVzb2x2ZSgpXG5cdFx0XHR9XG5cblx0XHRcdHRyYW5zYWN0aW9uLm9uYWJvcnQgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblx0XHRcdFx0ZG9uZSA9IHRydWVcblx0XHRcdFx0cmVzb2x2ZSgpXG5cdFx0XHR9XG5cdFx0fSlcblx0fVxuXG5cdGdldEFsbChvYmplY3RTdG9yZTogT2JqZWN0U3RvcmVOYW1lKTogUHJvbWlzZTxBcnJheTxEYXRhYmFzZUVudHJ5Pj4ge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRsZXQga2V5czogRGF0YWJhc2VFbnRyeVtdID0gW11cblx0XHRcdFx0bGV0IHJlcXVlc3QgPSB0aGlzLl90cmFuc2FjdGlvbi5vYmplY3RTdG9yZShvYmplY3RTdG9yZSkub3BlbkN1cnNvcigpXG5cblx0XHRcdFx0cmVxdWVzdC5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5faGFuZGxlRGJFcnJvcihldmVudCwgcmVxdWVzdCwgXCJnZXRBbGwoKS5vbkVycm9yIFwiICsgb2JqZWN0U3RvcmUsIHJlamVjdClcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0bGV0IGN1cnNvciA9IHJlcXVlc3QucmVzdWx0XG5cblx0XHRcdFx0XHRpZiAoY3Vyc29yKSB7XG5cdFx0XHRcdFx0XHRrZXlzLnB1c2goe1xuXHRcdFx0XHRcdFx0XHQvLyBAdHMtaWdub3JlIEtleSBjYW4gYmUgc29tZXRoaW5nIGNyYXp5IGxpa2UgRGF0ZSBvciBhcnJheSBvZiBrZXlzXG5cdFx0XHRcdFx0XHRcdGtleTogY3Vyc29yLmtleSxcblx0XHRcdFx0XHRcdFx0dmFsdWU6IGN1cnNvci52YWx1ZSxcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRjdXJzb3IuY29udGludWUoKSAvLyBvbnN1Y2Nlc3MgaXMgY2FsbGVkIGFnYWluXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoa2V5cykgLy8gY3Vyc29yIGhhcyByZWFjaGVkIHRoZSBlbmRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0dGhpcy5faGFuZGxlRGJFcnJvcihlLCBudWxsLCBcImdldEFsbCgpLmNhdGNoXCIsIHJlamVjdClcblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cblx0Z2V0PFQ+KG9iamVjdFN0b3JlOiBPYmplY3RTdG9yZU5hbWUsIGtleTogRGJLZXksIGluZGV4TmFtZT86IEluZGV4TmFtZSk6IFByb21pc2U8VCB8IG51bGw+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3Qgb3MgPSB0aGlzLl90cmFuc2FjdGlvbi5vYmplY3RTdG9yZShvYmplY3RTdG9yZSlcblxuXHRcdFx0XHRsZXQgcmVxdWVzdDogSURCUmVxdWVzdDxhbnk+XG5cblx0XHRcdFx0aWYgKGluZGV4TmFtZSkge1xuXHRcdFx0XHRcdHJlcXVlc3QgPSBvcy5pbmRleChpbmRleE5hbWUpLmdldChrZXkpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVxdWVzdCA9IG9zLmdldChrZXkpXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0XHR0aGlzLl9oYW5kbGVEYkVycm9yKGV2ZW50LCByZXF1ZXN0LCBcImdldCgpLm9uZXJyb3IgXCIgKyBvYmplY3RTdG9yZSwgcmVqZWN0KVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdFx0cmVzb2x2ZShldmVudC50YXJnZXQucmVzdWx0KVxuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdHRoaXMuX2hhbmRsZURiRXJyb3IoZSwgbnVsbCwgXCJnZXQoKS5jYXRjaFwiLCByZWplY3QpXG5cdFx0XHR9XG5cdFx0fSlcblx0fVxuXG5cdGFzeW5jIGdldEFzTGlzdDxUPihvYmplY3RTdG9yZTogT2JqZWN0U3RvcmVOYW1lLCBrZXk6IERiS2V5LCBpbmRleE5hbWU/OiBJbmRleE5hbWUpOiBQcm9taXNlPFRbXT4ge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZ2V0PFQ+KG9iamVjdFN0b3JlLCBrZXksIGluZGV4TmFtZSlcblx0XHRyZXR1cm4gcmVzdWx0ID8gW3Jlc3VsdF0gOiBbXVxuXHR9XG5cblx0cHV0KG9iamVjdFN0b3JlOiBPYmplY3RTdG9yZU5hbWUsIGtleTogRGJLZXkgfCBudWxsLCB2YWx1ZTogYW55KTogUHJvbWlzZTxhbnk+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0bGV0IHJlcXVlc3QgPSBrZXkgPyB0aGlzLl90cmFuc2FjdGlvbi5vYmplY3RTdG9yZShvYmplY3RTdG9yZSkucHV0KHZhbHVlLCBrZXkpIDogdGhpcy5fdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUob2JqZWN0U3RvcmUpLnB1dCh2YWx1ZSlcblxuXHRcdFx0XHRyZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0XHR0aGlzLl9oYW5kbGVEYkVycm9yKGV2ZW50LCByZXF1ZXN0LCBcInB1dCgpLm9uZXJyb3IgXCIgKyBvYmplY3RTdG9yZSwgcmVqZWN0KVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0XHQvLyBldmVudC50YXJnZXQucmVzdWx0IGlzbid0IGtub3duIGJ5IHR5cGVzY3JpcHQgZGVmaW5pdGlvbnNcblx0XHRcdFx0XHQvLyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMzA2Njlcblx0XHRcdFx0XHRyZXNvbHZlKChldmVudC50YXJnZXQgYXMgYW55KS5yZXN1bHQpXG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0dGhpcy5faGFuZGxlRGJFcnJvcihlLCBudWxsLCBcInB1dCgpLmNhdGNoXCIsIHJlamVjdClcblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cblx0ZGVsZXRlKG9iamVjdFN0b3JlOiBPYmplY3RTdG9yZU5hbWUsIGtleTogRGJLZXkpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0bGV0IHJlcXVlc3QgPSB0aGlzLl90cmFuc2FjdGlvbi5vYmplY3RTdG9yZShvYmplY3RTdG9yZSkuZGVsZXRlKGtleSlcblxuXHRcdFx0XHRyZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0XHR0aGlzLl9oYW5kbGVEYkVycm9yKGV2ZW50LCByZXF1ZXN0LCBcImRlbGV0ZSgpLm9uZXJyb3IgXCIgKyBvYmplY3RTdG9yZSwgcmVqZWN0KVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQpID0+IHtcblx0XHRcdFx0XHRyZXNvbHZlKClcblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHR0aGlzLl9oYW5kbGVEYkVycm9yKGUsIG51bGwsIFwiLmRlbGV0ZSgpLmNhdGNoIFwiICsgb2JqZWN0U3RvcmUsIHJlamVjdClcblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cblx0YWJvcnQoKSB7XG5cdFx0dGhpcy5hYm9ydGVkID0gdHJ1ZVxuXG5cdFx0dGhpcy5fdHJhbnNhY3Rpb24uYWJvcnQoKVxuXHR9XG5cblx0d2FpdCgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gdGhpcy5fcHJvbWlzZVxuXHR9XG5cblx0X2hhbmRsZURiRXJyb3IoZXZlbnQ6IGFueSwgY3VzdG9tVGFyZ2V0OiBhbnkgfCBudWxsLCBwcmVmaXg6IHN0cmluZywgY2FsbGJhY2s6IChlOiBhbnkpID0+IHVua25vd24pIHtcblx0XHRjb25zdCBlcnJvckVudHJpZXMgPSBleHRyYWN0RXJyb3JQcm9wZXJ0aWVzKGV2ZW50KVxuXHRcdGNvbnN0IGV2ZW50VGFyZ2V0RW50cmllcyA9IGV2ZW50LnRhcmdldCA/IGV4dHJhY3RFcnJvclByb3BlcnRpZXMoZXZlbnQudGFyZ2V0KSA6IFwiPG51bGw+XCJcblx0XHRjb25zdCBldmVudFRhcmdldEVycm9yRW50cmllcyA9IGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuZXJyb3IgPyBleHRyYWN0RXJyb3JQcm9wZXJ0aWVzKGV2ZW50LnRhcmdldC5lcnJvcikgOiBcIjxudWxsPlwiXG5cdFx0Y29uc3QgY3VzdG9tVGFyZ2V0RW50cmllcyA9IGN1c3RvbVRhcmdldCA/IGV4dHJhY3RFcnJvclByb3BlcnRpZXMoY3VzdG9tVGFyZ2V0KSA6IFwiPG51bGw+XCJcblx0XHRjb25zdCBjdXN0b21UYXJnZXRFcnJvckVudHJpZXMgPSBjdXN0b21UYXJnZXQgJiYgY3VzdG9tVGFyZ2V0LmVycm9yID8gZXh0cmFjdEVycm9yUHJvcGVydGllcyhjdXN0b21UYXJnZXQuZXJyb3IpIDogXCI8bnVsbD5cIlxuXHRcdGNvbnN0IG1zZyA9XG5cdFx0XHRcIkluZGV4ZWREYlRyYW5zYWN0aW9uIFwiICtcblx0XHRcdHByZWZpeCArXG5cdFx0XHRcIlxcbk9TZXM6IFwiICtcblx0XHRcdEpTT04uc3RyaW5naWZ5KCh0aGlzLl90cmFuc2FjdGlvbiBhcyBhbnkpLm9iamVjdFN0b3JlTmFtZXMpICtcblx0XHRcdFwiXFxuZXZlbnQ6XCIgK1xuXHRcdFx0ZXJyb3JFbnRyaWVzICtcblx0XHRcdFwiXFxudHJhbnNhY3Rpb24uZXJyb3I6IFwiICtcblx0XHRcdCh0aGlzLl90cmFuc2FjdGlvbi5lcnJvciA/IHRoaXMuX3RyYW5zYWN0aW9uLmVycm9yLm1lc3NhZ2UgOiBcIjxudWxsPlwiKSArXG5cdFx0XHRcIlxcbmV2ZW50LnRhcmdldDogXCIgK1xuXHRcdFx0ZXZlbnRUYXJnZXRFbnRyaWVzICtcblx0XHRcdFwiXFxuZXZlbnQudGFyZ2V0LmVycm9yOiBcIiArXG5cdFx0XHRldmVudFRhcmdldEVycm9yRW50cmllcyArXG5cdFx0XHRcIlxcbmN1c3RvbS50YXJnZXQ6IFwiICtcblx0XHRcdGN1c3RvbVRhcmdldEVudHJpZXMgK1xuXHRcdFx0XCJcXG5jdXN0b20udGFyZ2V0LmVycm9yOiBcIiArXG5cdFx0XHRjdXN0b21UYXJnZXRFcnJvckVudHJpZXNcblx0XHQvLyBJbiBzb21lIGNhc2VzIGl0J3Mgbm90IGF2YWlsYWJsZSBvbiBGaXJlZm94IDcwXG5cdFx0aWYgKHR5cGVvZiBldmVudC5zdG9wUHJvcGFnYXRpb24gPT09IFwiZnVuY3Rpb25cIikgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuXHRcdGlmIChcblx0XHRcdGN1c3RvbVRhcmdldCAmJlxuXHRcdFx0Y3VzdG9tVGFyZ2V0LmVycm9yICYmXG5cdFx0XHQoY3VzdG9tVGFyZ2V0LmVycm9yLm5hbWUgPT09IFwiVW5rbm93bkVycm9yXCIgfHxcblx0XHRcdFx0KHR5cGVvZiBjdXN0b21UYXJnZXQuZXJyb3IubWVzc2FnZSA9PT0gXCJzdHJpbmdcIiAmJiBjdXN0b21UYXJnZXQuZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcIlVua25vd25FcnJvclwiKSkpXG5cdFx0KSB7XG5cdFx0XHR0aGlzLl9vblVua25vd25FcnJvcihjdXN0b21UYXJnZXQuZXJyb3IpXG5cblx0XHRcdGNhbGxiYWNrKG5ldyBJbmRleGluZ05vdFN1cHBvcnRlZEVycm9yKG1zZywgdGhpcy5fdHJhbnNhY3Rpb24uZXJyb3IgPz8gdW5kZWZpbmVkKSlcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3QgZSA9IHRoaXMuX3RyYW5zYWN0aW9uLmVycm9yIHx8IChjdXN0b21UYXJnZXQgPyBjdXN0b21UYXJnZXQuZXJyb3IgOiBudWxsKVxuXG5cdFx0XHRpZiAoZSAmJiBlLm5hbWUgJiYgZS5uYW1lID09PSBcIlF1b3RhRXhjZWVkZWRFcnJvclwiKSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihcIlN0b3JhZ2UgUXVvdGEgZXhjZWVkZWRcIilcblx0XHRcdFx0Y2FsbGJhY2sobmV3IFF1b3RhRXhjZWVkZWRFcnJvcihtc2csIGUpKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2FsbGJhY2sobmV3IERiRXJyb3IobXNnLCBlKSlcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGI2NFVzZXJJZEhhc2godXNlcklkOiBJZCk6IHN0cmluZyB7XG5cdHJldHVybiB1aW50OEFycmF5VG9CYXNlNjQoc2hhMjU2SGFzaChzdHJpbmdUb1V0ZjhVaW50OEFycmF5KHVzZXJJZCkpKVxufVxuIiwiZXhwb3J0IHR5cGUgT2JqZWN0U3RvcmVOYW1lID0gc3RyaW5nXG5leHBvcnQgdHlwZSBJbmRleE5hbWUgPSBzdHJpbmdcblxuZXhwb3J0IGNvbnN0IFNlYXJjaEluZGV4T1M6IE9iamVjdFN0b3JlTmFtZSA9IFwiU2VhcmNoSW5kZXhcIlxuZXhwb3J0IGNvbnN0IFNlYXJjaEluZGV4TWV0YURhdGFPUzogT2JqZWN0U3RvcmVOYW1lID0gXCJTZWFyY2hJbmRleE1ldGFcIlxuZXhwb3J0IGNvbnN0IEVsZW1lbnREYXRhT1M6IE9iamVjdFN0b3JlTmFtZSA9IFwiRWxlbWVudERhdGFcIlxuZXhwb3J0IGNvbnN0IE1ldGFEYXRhT1M6IE9iamVjdFN0b3JlTmFtZSA9IFwiTWV0YURhdGFcIlxuZXhwb3J0IGNvbnN0IEdyb3VwRGF0YU9TOiBPYmplY3RTdG9yZU5hbWUgPSBcIkdyb3VwTWV0YURhdGFcIlxuZXhwb3J0IGNvbnN0IFNlYXJjaFRlcm1TdWdnZXN0aW9uc09TOiBPYmplY3RTdG9yZU5hbWUgPSBcIlNlYXJjaFRlcm1TdWdnZXN0aW9uc1wiXG5leHBvcnQgY29uc3QgU2VhcmNoSW5kZXhXb3Jkc0luZGV4OiBJbmRleE5hbWUgPSBcIlNlYXJjaEluZGV4V29yZHNcIlxuXG5leHBvcnQgY29uc3QgTWV0YWRhdGEgPSB7XG5cdHVzZXJFbmNEYktleTogXCJ1c2VyRW5jRGJLZXlcIixcblx0ZW5jRGJJdjogXCJlbmNEYkl2XCIsXG5cdHVzZXJHcm91cEtleVZlcnNpb246IFwidXNlckdyb3VwS2V5VmVyc2lvblwiLFxuXHRtYWlsSW5kZXhpbmdFbmFibGVkOiBcIm1haWxJbmRleGluZ0VuYWJsZWRcIixcblx0Ly8gd2UgZG9uJ3QgaW5kZXggc29tZSBtYWlsIGxpc3RzIChlZyBzcGFtKVxuXHRleGNsdWRlZExpc3RJZHM6IFwiZXhjbHVkZWRMaXN0SWRzXCIsXG5cdC8vIHN0b3JlZCBpbiB0aGUgZGF0YWJhc2UsIHNvIHRoZSBtYWlsYm94IGRvZXMgbm90IG5lZWQgdG8gYmUgbG9hZGVkIHdoZW4gc3RhcnRpbmcgdG8gaW5kZXggbWFpbHMgZXhjZXB0IHNwYW0gZm9sZGVyIGFmdGVyIGxvZ2luXG5cdC8vIHNlcnZlciB0aW1lc3RhbXAgb2YgdGhlIGxhc3QgdGltZSB3ZSBpbmRleGVkIG9uIHRoaXMgY2xpZW50LCBpbiBtaWxsaXNcblx0bGFzdEV2ZW50SW5kZXhUaW1lTXM6IFwibGFzdEV2ZW50SW5kZXhUaW1lTXNcIixcbn1cblxuZXhwb3J0IHR5cGUgRW5jcnlwdGVkRGJLZXlCYXNlTWV0YURhdGEgPSB7XG5cdHVzZXJFbmNEYktleTogVWludDhBcnJheVxuXHRlbmNEYkl2OiBVaW50OEFycmF5XG5cdHVzZXJHcm91cEtleVZlcnNpb246IG51bWJlclxufVxuXG5leHBvcnQgdHlwZSBFbmNyeXB0ZWRJbmRleGVyTWV0YURhdGEgPSBFbmNyeXB0ZWREYktleUJhc2VNZXRhRGF0YSAmIHtcblx0bWFpbEluZGV4aW5nRW5hYmxlZDogYm9vbGVhblxuXHRleGNsdWRlZExpc3RJZHM6IElkW11cblx0bGFzdEV2ZW50SW5kZXhUaW1lTXM6IG51bWJlclxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFnQ0EsU0FBUyx1QkFBdUJBLEdBQWdCO0NBQy9DLE1BQU1DLHNCQUEyQyxDQUFFO0FBRW5ELE1BQUssSUFBSSxPQUFPLEVBQ2YscUJBQW9C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